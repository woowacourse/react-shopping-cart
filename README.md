# 🛒 장바구니 (react-shopping-cart)

## 🔮 1단계 구현 목록 🦩

<details><summary><b>상세 보기</b></summary>

### API 호출

- [x] /cart-items API를 호출하여 장바구니 상품 데이터를 불러온다. (GET /cart-items)
- [x] 장바구니 상품의 수량을 변경할 수 있다. (PATCH /cart-items)
- [x] 장바구니에 담긴 상품을 제거할 수 있다. (DELETE /cart-items)

### 기능

- [x] 장바구니 상품 목록을 관리하는 상태를 만든다.
- [x] 선택 여부를 관리하는 상태를 만든다.
  - [x] 개별 카트 상품이 선택됐는지 확인한다.
  - [x] 전체 선택 여부를 확인한다.
- [x] 상품 목록과 선택 여부를 합쳐 주문 금액을 계산한다.
- [x] 주문 금액에 따라 배송비를 계산한다.
- [x] 주문 금액과 배송비를 종합해 총 결제 금액을 계산한다.

### 컴포넌트

- [x] Header
  - [x] Header에 알맞은 콘텐츠가 표시된다.
- [x] Title
  - [x] 현재 몇 종류의 상품이 담겨있는지 표시한다.
- [x] 상품 card
  - [x] 상품 정보 UI
    - [x] 상품 이미지가 뜬다
    - [x] 상품 이름이 뜬다
    - [x] 상품 가격이 뜬다
- [x] 전체 선택
  - [x] 상품이 모두 선택됐을 때 체크가 된다.
  - [x] 상품이 하나라도 선택해제 됐을 때 해제가 된다.
  - [x] 진입 시, 전체 선택이 되어 있다.
  - [x] 전체 선택을 클릭하면 개별 상품이 전부 선택된다.
  - [x] 개별 선택 버튼
    - [x] 진입 시, 선택이 되어 있다.
    - [x] 클릭시 선택을 해제할 수 있다.
    - [x] 전체 선택을 눌렀을 때 선택이 되어야한다
    - [x] 전체 선택을 해제했을떄 선택이 해제되어야 한다.
  - [x] 수량 조절 버튼
    - [x] 버튼을 누르면 장바구니에 담긴 수량이 증가한다
    - [x] 버튼을 누르면 장바구니에 담긴 수량이 감소한다
    - [x] 현재 담긴 수량이 나타난다
  - [x] 삭제 버튼
    - [x] 삭제 버튼을 누르면 상품이 장바구니에서 제거된다.
- [x] 금액 정보
  - [x] 주문 금액
    - [x] 현재 장바구니 목록을 바탕으로 주문금액을 표시한다
  - [x] 배송비
    - [x] 주문 금액이 100,000 이상일 경우 0 원, 아니면 3000원을 표시한다
  - [x] 총 결제 금액
    - [x] 주문 금액 + 배송비를 표시한다.
- [x] 주문 확인 버튼
  - [x] 장바구니에 상품이 하나도 없으면 비활성화
  - [x] 선택된 상품이 없으면 비활성화

</details>

## 🦩 2단계 구현 목록 🦩

### API 호출

- [x] /coupons API를 호출하여 쿠폰 데이터를 불러온다. (GET /coupons)

### 유틸 함수(인터페이스)

- [x] 장바구니 목록과 선택한 id 배열을 받아 선택한 장바구니 목록을 반환하는 함수
- [x] 주어진 날짜가 현재 날짜와 비교해 넘어갔는지 확인하는 함수
- [x] 현재 시간이 주어진 시간 범위 이내인지 확인하는 함수
- [x] 선택한 상품 목록과 쿠폰 정보를 제공하면 할인금액을 반환하는 함수
  - [x] 고정 할인 쿠폰
  - [x] X+Y 쿠폰
  - [x] 무료 배송 쿠폰
  - [x] 퍼센트 할인 쿠폰
- [x] 선택한 상품 목록과 적용할 쿠폰 목록을 제공하면 앞에서 순서대로 적용하여 할인금액을 반환하는 함수
- [x] 선택한 상품 목록과 적용할 쿠폰 목록을 제공하면 가능한 조합에서 가장 할인이 많이 되는 조합을 반환하는 함수

### 기능

- [x] 금액을 계산할 때는 주문 금액(쿠폰 적용 전)과 최종 결제 금액(쿠폰 적용 후, 배송비 포함)으로 나누어서 구분한다.

- [x] 배송비를 계산할 수 있다.

  - [x] 쿠폰 적용 후 결제 금액과 무관하게, 주문 금액(쿠폰 적용 전)이 100,000원 이상이면 무료 배송 혜택이 적용된다.
  - [x] “제주도 및 도서 산간 지역” 체크 시 배송비 3,000원 추가한다.
  - [x] FREESHIPPING 쿠폰은 도서산간 추가 배송비까지 포함하여 무료 처리해야 한다.

- [x] 쿠폰에 따른 할인 금액을 계산할 수 있다.

  - [x] 5,000원 할인 쿠폰 (FIXED5000)
    - [x] 100,000원 이상일 때 적용할 수 있다.
    - [x] 2025-11-30 이후 날짜에는 적용할 수 없다.
    - [x] 적용 시 최종 결제 금액에 5,000원을 할인한다.
  - [x] 1+1 쿠폰 (BOGO)
    - [x] 동일한 상품을 3개 구매 시 1개를 무료로 제공된다.
    - [x] 여러 상품이 해당되면 단가가 가장 높은 상품에 적용된다.
    - [x] 2025-06-30 이후 날짜에는 적용할 수 없다.
  - [x] 무료 배송 쿠폰 (FREESHIPPING)
    - [x] 50,000원 이상일 때 적용할 수 있다.
    - [x] 도서 및 산간 지역 포함이 체크되어 있어도 배송비를 무료로 적용한다.
    - [x] 2025-08-31 이후 날짜에는 적용할 수 없다.
  - [x] 30% 시간제 할인 쿠폰 (MIRACLESALE)
    - [x] 최종 금액에 할인율 30%을 적용한다.
    - [x] 오전 4시 ~ 7시 사이의 시간에만 적용 가능하다.
    - [x] 2025-07-31 이후 날짜에는 적용할 수 없다.
  - [x] 한 번에 최대 2개의 쿠폰을 사용할 수 있다.
  - [x] 적용 순서나 종류에 따라 가장 할인 효과가 큰 조합을 자동으로 선택해야 한다.

- [ ] 장바구니 선택 상태를 로컬스토리지에 저장하여 새로고침 시에도 유지되도록 한다.

### 컴포넌트

- [x] 주문 확인 화면

  - [x] 최종적으로 주문한 상품의 정보를 표시한다.
  - [x] 쿠폰 모달을 띄울 수 있는 쿠폰 적용 버튼이 있다.
  - [x] 제주도 및 도서 산간 지역의 추가 배송비를 체크할 수 있다.
  - [x] 주문 금액, 쿠폰 할인 금액, 배송비를 표시한다.

- [x] 결제 확인 화면

  - [x] 장바구니로 돌아가는 하단 버튼이 있다.

- [x] 쿠폰 모달
  - [x] 쿠폰 적용 클릭 시 모달이 생성된다.
  - [x] 적용할 수 있는 쿠폰의 종류를 표시한다.
  - [x] 적용할 수 없는 쿠폰은 비활성화된다.
  - [x] 쿠폰 할인 금액을 표시한다.
