# 기능 요구 명세서

## Step 1 요구사항

- [x] /cart-items API를 호출하여 장바구니 상품 데이터를 불러온다.
- [x] 불러온 데이터를 기반으로 클라이언트 상태를 구성하고 관리한다.
  - 개별 상품의 선택 여부, 결제 금액, 배송비 등의 상태를 관리한다.
- [x] 상품 선택에 따른 결제 금액, 배송비 등의 동적인 변경 사항을 처리한다.
  - [x] 진입 시, 전체 선택 되어 있는 것이 디폴트이다.
  - [x] 상품 선택/해제 시 결제 금액을 동적으로 변경한다.
  - [x] 결제 금액이 10만원 이상일 경우 배송비는 무료이다.
- [x] 장바구니 상품의 수량을 변경할 수 있다.
- [x] 장바구니에 담긴 상품을 제거할 수 있다.
- [x] 장바구니에 상품이 없을 시 UI 보여준다.
- [x] 주문을 완료하면 주문 확인 페이지로 라우팅한다.

## Step 2 요구사항

- [x] /coupons API를 호출하여 쿠폰 목록을 불러온다.
- [x] 4가지 쿠폰 타입을 구현한다:
  - [x] **5,000원 할인 쿠폰 (FIXED5000)**: 최소 주문 금액 100,000원, 5,000원 할인
  - [x] **2+1 쿠폰 (BOGO)**: 동일 상품 2개 구매 시 1개 무료 (단가가 가장 높은 상품에 적용)
  - [x] **무료 배송 쿠폰 (FREESHIPPING)**: 최소 주문 금액 50,000원, 도서산간 지역 포함 무료 배송
  - [x] **30% 시간제 할인 쿠폰 (MIRACLESALE)**: 30% 할인, 오전 4시~7시 적용
- [x] 각 쿠폰의 조건과 효과에 맞는 할인 금액을 파생 상태로 계산한다.
- [x] 주문 금액(쿠폰 적용 전)과 최종 결제 금액(쿠폰 적용 후)을 구분하여 관리한다.

### 쿠폰 복합 적용

- [x] 한 번에 최대 2개의 쿠폰을 사용할 수 있다.
- [x] 가장 할인 효과가 큰 조합을 자동으로 선택한다.
- [x] 쿠폰 코드 입력을 위한 모달창을 구현한다.

### 배송비 정책

- [x] 주문 금액(쿠폰 적용 전)이 100,000원 이상이면 무료 배송을 적용한다.
- [x] "제주도 및 도서 산간 지역" 체크 시 배송비 3,000원을 추가한다.
- [x] FREESHIPPING 쿠폰은 도서산간 추가 배송비까지 포함하여 무료 처리한다.
- [x] 쿠폰 적용 후 결제 금액이 100,000원 미만이 되어도 원래 주문 금액 기준으로 무료 배송을 유지한다.

### 데이터 지속성

- [ ] 장바구니 선택 상태를 localStorage에 저장하여 새로고침 시에도 유지한다.
